<html>
<head>
<title>Python Flask Upload and display image</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">        
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand mg" href="#">CAPTION.AI</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
     
    </div>
  </nav>
<p><h1 align="center">ImAgE DaLoGe CaPtIoN DeNgE</h1></p>
{% set x=0 %}
<div class="container" style="margin-top: 125px;">
<div class="row mi">
    <!-- <p>
        {% with messages = get_flashed_messages() %}
          {% if messages %}
            <ul>
            {% for message in messages %}
              <li>{{ message }}</li>
            {% endfor %}
            </ul>
          {% endif %}
        {% endwith %}
    </p> -->
    {% if filename %}
    <div class="mi">
        <img src="{{ url_for('display_image', filename=filename) }}" class="img-thumbnail" id="uploaded-img">
        <form method="post" action="/" enctype="multipart/form-data">
            <p class="mi">
                <input type="submit" value="Generate Captions" class="btn btn-danger" style="margin: 15px;" id="generate-captions-btn">
            </p>
            <p>{{data}}</p>
        </form>
    </div>
    {% set x=1 %}
{% endif %}
{% if x==0 %}
    <form method="post" action="/" id="myf" enctype="multipart/form-data" class="mi">
        <dl>
            <p>
                <input type="file" name="file" class="form-control" autocomplete="off" required>
                
            </p>
            <p>
              <input type="text" name="text" class="form-control" autocomplete="off" required placeholder="Enter the related caption" >
            </p>
        </dl>
        <p >
            <input type="button" value="Upload" class="btn btn-info "  style="margin: 5px;" id="upload-btn">
        </p>
        
    </form>
{% endif %}
</div>
</div>
<script>
$(document).ready(function() {
    $('#upload-btn').click(function() {
        $('#myf').submit(); // Submit the form when upload button is clicked
        $('#myf').hide(); // Hide the uploaded image
        $('#upload-btn').hide(); // Hide the upload button
        $('#generate-captions-btn').show(); // Show the generate captions button
    });
});
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</script>
</body>
</html>
